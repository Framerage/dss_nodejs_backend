FROM node:18.16.1
WORKDIR /app
COPY package.json yarn.lock ./
RUN yarn
ENV LANG=C.UTF-8
COPY . ./

ARG NODE_ENV
ARG DB_URL
ARG PORT
ARG SECRET_KEY
ARG MAIL_EXTRA_PASS

ENV NODE_ENV ${NODE_ENV}
ENV DB_URL ${DB_URL}
ENV PORT ${PORT} 
ENV SECRET_KEY ${SECRET_KEY}
ENV MAIL_EXTRA_PASS ${MAIL_EXTRA_PASS}

EXPOSE 8080
CMD [ "yarn","dev" ]